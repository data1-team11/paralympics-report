<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Team 11 - Housing</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Team 11</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./water.html" rel="" target="">
 <span class="menu-text">Water</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./energy.html" rel="" target="">
 <span class="menu-text">Energy</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./airbnb_listings_JJ.html" rel="" target="" aria-current="page">
 <span class="menu-text">Housing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./transport.html" rel="" target="">
 <span class="menu-text">Transport</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
    <a href="https://github.com/data1-team11/paralympics-report" rel="" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#assignment-3-housing" id="toc-assignment-3-housing" class="nav-link active" data-scroll-target="#assignment-3-housing">Assignment 3 : Housing</a>
  <ul class="collapse">
  <li><a href="#preliminary-data" id="toc-preliminary-data" class="nav-link" data-scroll-target="#preliminary-data">Preliminary Data</a></li>
  <li><a href="#code" id="toc-code" class="nav-link" data-scroll-target="#code">Code:</a></li>
  <li><a href="#plot-the-amount-of-airbnb-locations-per-neighbourhood." id="toc-plot-the-amount-of-airbnb-locations-per-neighbourhood." class="nav-link" data-scroll-target="#plot-the-amount-of-airbnb-locations-per-neighbourhood.">2. Plot the amount of AirBnB locations per neighbourhood.</a></li>
  <li><a href="#pseudocode-1" id="toc-pseudocode-1" class="nav-link" data-scroll-target="#pseudocode-1">Pseudocode</a></li>
  <li><a href="#which-street-in-amsterdam-has-the-most-airbnb-apartments" id="toc-which-street-in-amsterdam-has-the-most-airbnb-apartments" class="nav-link" data-scroll-target="#which-street-in-amsterdam-has-the-most-airbnb-apartments">3: Which street in Amsterdam has the most AirBnB apartments?</a></li>
  <li><a href="#pseudocode-2" id="toc-pseudocode-2" class="nav-link" data-scroll-target="#pseudocode-2">Pseudocode</a></li>
  <li><a href="#try-to-cross-reference-the-data-from-the-airbnb-dataset-with-the-bbga.-can-you-figure-out-if-all-apartments-of-airbnb-are-designated-as-housing-which-number-of-apartments-are-not-rented-out-all-the-time-but-are-also-used-as-normal-housing" id="toc-try-to-cross-reference-the-data-from-the-airbnb-dataset-with-the-bbga.-can-you-figure-out-if-all-apartments-of-airbnb-are-designated-as-housing-which-number-of-apartments-are-not-rented-out-all-the-time-but-are-also-used-as-normal-housing" class="nav-link" data-scroll-target="#try-to-cross-reference-the-data-from-the-airbnb-dataset-with-the-bbga.-can-you-figure-out-if-all-apartments-of-airbnb-are-designated-as-housing-which-number-of-apartments-are-not-rented-out-all-the-time-but-are-also-used-as-normal-housing">4. Try to cross reference the data from the AirBnB dataset with the BBGA. Can you figure out if all apartments of AirBnB are designated as housing? Which number of apartments are not rented out all the time but are also used as normal housing?</a></li>
  <li><a href="#how-many-hotel-rooms-should-be-built-if-amsterdam-wants-to-accommodate-the-same-number-of-tourists" id="toc-how-many-hotel-rooms-should-be-built-if-amsterdam-wants-to-accommodate-the-same-number-of-tourists" class="nav-link" data-scroll-target="#how-many-hotel-rooms-should-be-built-if-amsterdam-wants-to-accommodate-the-same-number-of-tourists">5. How many hotel rooms should be built if Amsterdam wants to accommodate the same number of tourists?</a></li>
  <li><a href="#how-many-different-licenses-are-issued" id="toc-how-many-different-licenses-are-issued" class="nav-link" data-scroll-target="#how-many-different-licenses-are-issued">6. How many different licenses are issued?</a></li>
  <li><a href="#results-analysis" id="toc-results-analysis" class="nav-link" data-scroll-target="#results-analysis">Results analysis:</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.dev/data1-team11/paralympics-report/blob/main/airbnb_listings_JJ.ipynb" class="toc-action">Edit this page</a></p><p><a href="https://github.com/data1-team11/paralympics-report/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Housing</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="assignment-3-housing" class="level1">
<h1>Assignment 3 : Housing</h1>
<section id="preliminary-data" class="level3">
<h3 class="anchored" data-anchor-id="preliminary-data">Preliminary Data</h3>
<section id="the-following-infomation-was-found-prior-to-the-start-of-the-assignment-in-order-to-use-it." class="level4">
<h4 class="anchored" data-anchor-id="the-following-infomation-was-found-prior-to-the-start-of-the-assignment-in-order-to-use-it.">The following infomation was found prior to the start of the assignment in order to use it.</h4>
<p>tax hotels = 7% of turnover + 3 euros per room tax airbnb = 10% = 3 euros number of visitors = 30000</p>
<p>Library imports and DataFrame generation</p>
<div class="cell" data-tags="[]" data-execution_count="8">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>csv_data <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>listings <span class="op">=</span> <span class="bu">open</span>(<span class="st">"./data/listings_full.csv"</span>,<span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'latin1'</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> listings:</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> line.split(<span class="st">','</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    csv_data.append(data)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>listings.close()</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">"./data/listings_full.csv"</span>, encoding<span class="op">=</span><span class="st">'latin1'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="what-amsterdam-will-receive-from-tourist-tax-if-the-event-lasts-a-week-and-you-will-have-30.000-visitors" class="level4">
<h4 class="anchored" data-anchor-id="what-amsterdam-will-receive-from-tourist-tax-if-the-event-lasts-a-week-and-you-will-have-30.000-visitors">1. What Amsterdam will receive from tourist tax if the event lasts a week and you will have 30.000 visitors?</h4>
</section>
<section id="pseudocode" class="level4">
<h4 class="anchored" data-anchor-id="pseudocode">Pseudocode</h4>
<ol type="1">
<li>Discard listings with minimum stays of more than 7 nights</li>
<li>Sum the total ammount of people that fit the remaining airbnbs accomodate (#19812)</li>
<li>Calculate average price of accomodation remaining listings</li>
<li>for the remaining visitors (11188) they will stay in hotels –&gt; average of 2.2 beds per room</li>
<li>Divide the number of rooms between the remaining tourists</li>
<li>Multiply number of available beds to average price</li>
<li>Sum airbnb + hotels taxes accordingly</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Gathering information shortcuts:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#ok_listings = pd.DataFrame(df.columns)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#print(df.columns)</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#print(df.columns[34])</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#print(df.maximum_nights)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="code" class="level3">
<h3 class="anchored" data-anchor-id="code">Code:</h3>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#we discard listings with minimum stays of more than 7 nights</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ok_listings <span class="op">=</span> df[(df[<span class="st">'minimum_nights'</span>] <span class="op">&lt;</span> <span class="dv">8</span>)].copy()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#we check that all numeric values in our DataFrame sum</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> ok_listings.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">0</span>,numeric_only<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co">#we sum individually the column 'accommodates' so we can retrieve the number of people who can stay </span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>no_ppl <span class="op">=</span> ok_listings.accommodates.<span class="bu">sum</span>()</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of Airbnb listings with at most 7 days of minimal nights :'</span>, no_ppl)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co">#print(test) success</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>tourists <span class="op">=</span> <span class="dv">30000</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>tourists_hotel <span class="op">=</span> tourists<span class="op">-</span>no_ppl</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of people who needs to stay in hotel rooms'</span>,<span class="st">': '</span>, tourists_hotel)</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#print(ok_listings)</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Average cost of overnight accommodation in Amsterdam in the Netherlands from January 2019 to June 2023</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">##https://www.statista.com/statistics/614061/overnight-accommodation-costs-amsterdam-city/</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>hotel_price_per_night <span class="op">=</span> <span class="dv">294</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#https://www.cbs.nl/en-gb/figures/detail/84040ENG</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#Hotels; capacity, type of accommodation, beds, star rating</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>hotel_rooms_ams <span class="op">=</span> <span class="dv">41840</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>hotel_beds_ams <span class="op">=</span> <span class="dv">90918</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>avg_beds_per_room <span class="op">=</span> hotel_beds_ams<span class="op">/</span>hotel_rooms_ams</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="co">#print(avg_beds_per_room)</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co">#Number of hotel rooms used by tourists who don't fit in airbnbs</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>no_hotel_rooms_used <span class="op">=</span> tourists_hotel<span class="op">/</span>avg_beds_per_room</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>revenue_hotels <span class="op">=</span> no_hotel_rooms_used<span class="op">*</span>hotel_price_per_night</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>tax_hotels <span class="op">=</span> revenue_hotels <span class="op">*</span> <span class="fl">0.07</span> <span class="op">+</span> no_hotel_rooms_used <span class="op">*</span> <span class="dv">3</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="co">#getting rid of $ signs in column</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>new_price <span class="op">=</span> df[<span class="st">'price'</span>].<span class="bu">str</span>.<span class="bu">slice</span>(<span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a><span class="co">#adding new_price as a column in our dataframe</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>ok_listings[<span class="st">'new_price'</span>] <span class="op">=</span> new_price</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>ok_listings[<span class="st">'new_price'</span>]<span class="op">=</span>ok_listings[<span class="st">'new_price'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>,<span class="st">''</span>)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a><span class="co">#converting new column values to float so we can math it up =P</span></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>ok_listings[<span class="st">'new_price'</span>] <span class="op">=</span> ok_listings[<span class="st">'new_price'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a><span class="co">#calculating total revenue of airbnb by summing all location price per night and then times 7 (number of days in a week)</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>revenue_airbnb <span class="op">=</span> ok_listings.new_price.<span class="bu">sum</span>()<span class="op">*</span><span class="dv">7</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>tax_airbnb <span class="op">=</span> <span class="bu">float</span>(revenue_airbnb)<span class="op">*</span><span class="fl">.1</span> <span class="op">+</span> <span class="bu">float</span>(<span class="bu">len</span>(new_price)<span class="op">*</span><span class="dv">3</span>)</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Total tax revenue from Airbnb locations $'</span>, tax_airbnb)</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Total tax revenue from hotel rooms $'</span>,tax_hotels)</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>total_revenue <span class="op">=</span> tax_airbnb <span class="op">+</span> tax_hotels</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Total tax revenue gathered for the government'</span>, total_revenue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of Airbnb listings with at most 7 days of minimal nights : 23407.0
Number of people who needs to stay in hotel rooms :  6593.0
Total tax revenue from Airbnb locations $ 1469366.9000000001
Total tax revenue from hotel rooms $ 71543.25226687785
Total tax revenue gathered for the government 1540910.152266878</code></pre>
</div>
</div>
</section>
<section id="plot-the-amount-of-airbnb-locations-per-neighbourhood." class="level3">
<h3 class="anchored" data-anchor-id="plot-the-amount-of-airbnb-locations-per-neighbourhood.">2. Plot the amount of AirBnB locations per neighbourhood.</h3>
</section>
<section id="pseudocode-1" class="level3">
<h3 class="anchored" data-anchor-id="pseudocode-1">Pseudocode</h3>
<ol type="1">
<li>Filter from dataframe the locations of airbnb</li>
<li>Gather the different categories inside the column neighourhood</li>
<li>Sum each category inside neighbourhood</li>
</ol>
<div class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#It can't get mpre efficient than this</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#table = ok_listings.neighbourhood_cleansed.value_counts()</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>re_index <span class="op">=</span> ok_listings[<span class="st">'neighbourhood_cleansed'</span>].value_counts().reset_index().rename(columns<span class="op">=</span>{<span class="st">"index"</span>: <span class="st">'neighbourhood'</span>, <span class="dv">0</span> : <span class="st">'count'</span>})</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(re_index )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    neighbourhood_cleansed  count
0                   De Baarsjes - Oud-West   1329
1                             Centrum-West    973
2                  De Pijp - Rivierenbuurt    898
3                             Centrum-Oost    766
4                                     Zuid    571
5                               Westerpark    561
6                                 Oud-Oost    475
7                            Bos en Lommer    399
8                                Oud-Noord    389
9   Oostelijk Havengebied - Indische Buurt    304
10                         Watergraafsmeer    249
11                              Noord-West    212
12                IJburg - Zeeburgereiland    173
13                             Slotervaart    156
14                              Noord-Oost    135
15                 Geuzenveld - Slotermeer    110
16                  Buitenveldert - Zuidas     96
17                  De Aker - Nieuw Sloten     67
18                         Bijlmer-Centrum     47
19                   Gaasperdam - Driemond     45
20                                  Osdorp     43
21                            Bijlmer-Oost     37</code></pre>
</div>
</div>
<div class="cell" data-execution_count="201">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#graph with information</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>figure <span class="op">=</span> px.bar(re_index, x<span class="op">=</span><span class="st">'neighbourhood_cleansed'</span>, y<span class="op">=</span><span class="st">'count'</span>, title <span class="op">=</span>  <span class="st">'Number of airbnbs per neighbourhood in Amsterdam'</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>figure.show()</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>[chart](images<span class="op">/</span>Q2_quanity.png)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
</section>
<section id="which-street-in-amsterdam-has-the-most-airbnb-apartments" class="level3">
<h3 class="anchored" data-anchor-id="which-street-in-amsterdam-has-the-most-airbnb-apartments">3: Which street in Amsterdam has the most AirBnB apartments?</h3>
</section>
<section id="pseudocode-2" class="level3">
<h3 class="anchored" data-anchor-id="pseudocode-2">Pseudocode</h3>
<ol type="1">
<li>Find the locations of airbnb through lat and long.</li>
<li>Add the street category to the DataFrame.</li>
<li>Gather the different categories inside the column Street.</li>
<li>Sum each category per street filter.</li>
</ol>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#pip install geopy</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> certifi</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> ssl</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopy.geocoders</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geopy.geocoders <span class="im">import</span> Nominatim, Photon</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Workaround to fix SSL certififcate expired error on some laptops</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Solution taken from https://stackoverflow.com/a/50665487</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Error message:</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   GeocoderUnavailable: HTTPSConnectionPool(host='nominatim.openstreetmap.org', port=443): </span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   Max retries exceeded with url: /reverse?lat=52.40164&amp;lon=4.95106&amp;format=json&amp;addressdetails=1 </span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] </span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   certificate verify failed: certificate has expired (_ssl.c:1006)')))</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>ctx <span class="op">=</span> ssl.create_default_context(cafile<span class="op">=</span>certifi.where())</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>geopy.geocoders.options.default_ssl_context <span class="op">=</span> ctx</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>geolocator <span class="op">=</span> Photon(user_agent<span class="op">=</span><span class="st">'geoapiExercises'</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#print(ok_listings.columns)</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#New dataframe with only 3 parameters</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb <span class="op">=</span> ok_listings[[<span class="st">'latitude'</span>, <span class="st">'longitude'</span>]]</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">#we erase all typos from the columns and then add '.' accordingly to their index position as to logical lon/lat values</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb[<span class="st">'longitude'</span>]<span class="op">=</span>geolocs_airbnb[<span class="st">'longitude'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>,<span class="st">''</span>)</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb[<span class="st">'longitude'</span>]<span class="op">=</span>geolocs_airbnb[<span class="st">'longitude'</span>].<span class="bu">str</span>.replace(<span class="st">'.'</span>,<span class="st">''</span>)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb.longitude <span class="op">=</span> (geolocs_airbnb.longitude.<span class="bu">str</span>[:<span class="dv">1</span>] <span class="op">+</span> <span class="st">'.'</span><span class="op">+</span> geolocs_airbnb.longitude.<span class="bu">str</span>[<span class="dv">1</span>:]).astype(<span class="bu">float</span>)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">#print(geolocs_airbnb.longitude)</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb[<span class="st">'latitude'</span>]<span class="op">=</span>geolocs_airbnb[<span class="st">'latitude'</span>].<span class="bu">str</span>.replace(<span class="st">','</span>,<span class="st">''</span>)</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb[<span class="st">'latitude'</span>]<span class="op">=</span>geolocs_airbnb[<span class="st">'latitude'</span>].<span class="bu">str</span>.replace(<span class="st">'.'</span>,<span class="st">''</span>)</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb.latitude <span class="op">=</span> (geolocs_airbnb.latitude.<span class="bu">str</span>[:<span class="dv">2</span>] <span class="op">+</span> <span class="st">'.'</span> <span class="op">+</span> geolocs_airbnb.latitude.<span class="bu">str</span>[<span class="dv">2</span>:]).astype(<span class="bu">float</span>)</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="co">#print(type(geolocs_airbnb.latitude[5]))</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="co">#print(longitude)</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="co">#print(geolocs_airbnb)</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="co">#print(len(geolocs_airbnb))</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>):</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    latitude, longitude <span class="op">=</span> geolocs_airbnb.iloc[i][<span class="st">'latitude'</span>],geolocs_airbnb.iloc[i][<span class="st">'longitude'</span>]</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>latitude<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>longitude<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    location <span class="op">=</span> geolocator.reverse((latitude, longitude), timeout<span class="op">=</span><span class="va">None</span>)</span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(location.raw)  </span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>    street <span class="op">=</span> location.raw[<span class="st">'properties'</span>][<span class="st">'street'</span>]</span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>    geolocs_airbnb.loc[i, <span class="st">'street'</span>] <span class="op">=</span> street</span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb.head()</span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a><span class="co">#adding street as a column in our dataframe</span></span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>geolocs_airbnb[<span class="st">'street'</span>] <span class="op">=</span> street</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:26: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb['longitude']=geolocs_airbnb['longitude'].str.replace(',','')
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:27: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb['longitude']=geolocs_airbnb['longitude'].str.replace('.','')
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:28: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb.longitude = (geolocs_airbnb.longitude.str[:1] + '.'+ geolocs_airbnb.longitude.str[1:]).astype(float)
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:32: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb['latitude']=geolocs_airbnb['latitude'].str.replace(',','')
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:33: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb['latitude']=geolocs_airbnb['latitude'].str.replace('.','')
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:34: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb.latitude = (geolocs_airbnb.latitude.str[:2] + '.' + geolocs_airbnb.latitude.str[2:]).astype(float)
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:47: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  geolocs_airbnb.loc[i, 'street'] = street
C:\Users\jjcor\AppData\Local\Temp\ipykernel_10580\4277228365.py:47: FutureWarning: Setting an item of incompatible dtype is deprecated and will raise in a future error of pandas. Value 'Jisperveldstraat' has dtype incompatible with float64, please explicitly cast to a compatible dtype first.
  geolocs_airbnb.loc[i, 'street'] = street</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>52.40164, 4.95106
{'geometry': {'coordinates': [4.9515278047393405, 52.401009], 'type': 'Point'}, 'type': 'Feature', 'properties': {'osm_id': 280764133, 'extent': [4.9514575, 52.4010492, 4.9515981, 52.4009688], 'country': 'Nederland', 'city': 'Amsterdam', 'countrycode': 'NL', 'postcode': '1024 BC', 'type': 'house', 'osm_type': 'W', 'osm_key': 'man_made', 'street': 'Jisperveldstraat', 'district': 'Noord', 'osm_value': 'pumping_station', 'name': 'Gemaal Jisperveldstraat', 'state': 'Noord-Holland'}}
52.38855, 4.88521
{'geometry': {'coordinates': [4.8853248, 52.3885722], 'type': 'Point'}, 'type': 'Feature', 'properties': {'osm_id': 7377913, 'extent': [4.8851325, 52.3886311, 4.8858183, 52.3885722], 'country': 'Nederland', 'city': 'Amsterdam', 'countrycode': 'NL', 'postcode': '1013 LD', 'locality': 'Zeeheldenbuurt', 'type': 'street', 'osm_type': 'W', 'osm_key': 'highway', 'district': 'West', 'osm_value': 'unclassified', 'name': 'Zoutkeetsplein', 'state': 'Noord-Holland'}}</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>KeyError: 'street'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(geolocs_airbnb)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(location.raw[<span class="st">'properties'</span>][<span class="st">'street'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       latitude  longitude            street
0     52.401640   4.951060  Jisperveldstraat
1     52.388550   4.885210               NaN
2     52.378240   4.868260               NaN
3     52.340910   4.848020               NaN
4     52.376410   4.883030               NaN
...         ...        ...               ...
8381  52.394972   4.906180               NaN
8382  52.387880   4.911080               NaN
8383  52.386497   4.848041               NaN
8384  52.372431   4.894491               NaN
8385  52.342122   4.909411               NaN

[8035 rows x 3 columns]</code></pre>
</div>
<div class="cell-output cell-output-error">
<pre><code>KeyError: 'street'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#saving harvested data inside another file for next tries</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>fileObj <span class="op">=</span> <span class="bu">open</span>(<span class="st">'data.obj'</span>, <span class="st">'wb'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>pickle.dump(geolocs_airbnb,fileObj)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>fileObj.close()</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>pickle.load</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'geolocs_airbnb' is not defined</code></pre>
</div>
</div>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#print(geolocs_airbnb.street)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of Airbnb listings per street:'</span>, geolocs_airbnb.street.value_counts())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>AttributeError: 'DataFrame' object has no attribute 'street'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="196">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> osmnx <span class="im">as</span> ox</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly <span class="im">as</span> py</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> Point, Polygon</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#here we set up a geodata frame based on the airbnb data set and do so with lat and long as geo location</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>points_airbnb <span class="op">=</span> gpd.GeoDataFrame(geolocs_airbnb, geometry<span class="op">=</span>gpd.points_from_xy(geolocs_airbnb.longitude, geolocs_airbnb.latitude), crs <span class="op">=</span> <span class="st">"WGS84"</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(points_airbnb.head())</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="co"># distribution of airbnbs in ams</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>ams <span class="op">=</span> <span class="st">"Amsterdam"</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>graph <span class="op">=</span> ox.graph_from_place(ams)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co">#map with airbnbs locations</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">150</span>,<span class="dv">150</span>))</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>ax.set_aspect(<span class="st">'equal'</span>) <span class="co">#same scaling as data available</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>ax.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>ox.plot_graph(graph, edge_color<span class="op">=</span><span class="st">'#edf2f1'</span>,</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>                        node_size<span class="op">=</span><span class="dv">0</span>, edge_linewidth<span class="op">=</span><span class="dv">5</span>,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>                        show<span class="op">=</span><span class="va">False</span>, close<span class="op">=</span><span class="va">False</span>, ax<span class="op">=</span>ax,</span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>points_airbnb.plot(ax<span class="op">=</span>ax, color <span class="op">=</span><span class="st">"#81dec8"</span>, markersize <span class="op">=</span> <span class="dv">150</span>)</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Q2_Q3_airbnbsAMS.png"</span>)</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>[Map](images<span class="op">/</span>Q2_Q3_airbnbsAMS.png)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   latitude  longitude                  geometry
0  52.40164    4.95106  POINT (4.95106 52.40164)
1  52.38855    4.88521  POINT (4.88521 52.38855)
2  52.37824    4.86826  POINT (4.86826 52.37824)
3  52.34091    4.84802  POINT (4.84802 52.34091)
4  52.37641    4.88303  POINT (4.88303 52.37641)</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="airbnb_listings_JJ_files/figure-html/cell-12-output-2.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="try-to-cross-reference-the-data-from-the-airbnb-dataset-with-the-bbga.-can-you-figure-out-if-all-apartments-of-airbnb-are-designated-as-housing-which-number-of-apartments-are-not-rented-out-all-the-time-but-are-also-used-as-normal-housing" class="level3">
<h3 class="anchored" data-anchor-id="try-to-cross-reference-the-data-from-the-airbnb-dataset-with-the-bbga.-can-you-figure-out-if-all-apartments-of-airbnb-are-designated-as-housing-which-number-of-apartments-are-not-rented-out-all-the-time-but-are-also-used-as-normal-housing">4. Try to cross reference the data from the AirBnB dataset with the BBGA. Can you figure out if all apartments of AirBnB are designated as housing? Which number of apartments are not rented out all the time but are also used as normal housing?</h3>
<div class="cell" data-execution_count="164">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#usable data from bbga</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>bbga_df <span class="op">=</span> pd.read_csv(<span class="st">'./data/2023_BBGA_0614_cf8d825e89.csv'</span>) <span class="co">#./bbga_short.csv</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">#print(bbga_df)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>bbga_df.replace({ <span class="st">"Oud West, De Baarsjes"</span> :<span class="st">"De Baarsjes - Oud-West"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"De Pijp, Rivierenbuurt"</span>:<span class="st">"De Pijp - Rivierenbuurt"</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Indische Buurt, Oostelijk Havengebied"</span> : <span class="st">"Oostelijk Havengebied - Indische Buurt"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"IJburg, Zeeburgereiland"</span> : <span class="st">"IJburg - Zeeburgereiland"</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Geuzenveld, Slotermeer"</span> : <span class="st">"Geuzenveld - Slotermeer"</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Buitenveldert, Zuidas"</span> : <span class="st">"Buitenveldert - Zuidas"</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Oud-Zuid"</span> : <span class="st">"Zuid"</span> ,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>            <span class="st">"De Aker, Sloten, Nieuw-Sloten"</span> : <span class="st">"De Aker - Nieuw Sloten"</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Gaasperdam"</span> : <span class="st">"Gaasperdam - Driemond"</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bbga_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       niveau niveaunaam    sd          sdnaam gebiedcode22  \
0         1.0   Gemeente  STAD  0363 Amsterdam         STAD   
1         2.0  Stadsdeel     A       A Centrum            A   
2         2.0  Stadsdeel     B     B Westpoort            B   
3         2.0  Stadsdeel     E          E West            E   
4         2.0  Stadsdeel     F    F Nieuw-West            F   
...       ...        ...   ...             ...          ...   
20009     4.0       Wijk     N           Noord           NN   
20010     4.0       Wijk     N           Noord           NQ   
20011     4.0       Wijk     S           Weesp           SA   
20012     4.0       Wijk     T        Zuidoost           TK   
20013     4.0       Wijk     T        Zuidoost           TM   

               gebiedcodenaam           gebiednaam  gsd  jaar  BEVTOTAAL  ...  \
0                   Amsterdam            Amsterdam  NaN  2023   918193.0  ...   
1                   A Centrum              Centrum  NaN  2023    90020.0  ...   
2                 B Westpoort            Westpoort  NaN  2023     1009.0  ...   
3                      E West                 West  NaN  2023   148569.0  ...   
4                F Nieuw-West           Nieuw-West  NaN  2023   163448.0  ...   
...                       ...                  ...  ...   ...        ...  ...   
20009  NN Tuindorp Nieuwendam  Tuindorp Nieuwendam  NaN  2001        NaN  ...   
20010            NQ Waterland            Waterland  NaN  2001        NaN  ...   
20011             SA Driemond             Driemond  NaN  2001        NaN  ...   
20012           TK Nellestein           Nellestein  NaN  2001        NaN  ...   
20013                 TM Gein                 Gein  NaN  2001        NaN  ...   

       SK017_KWETS34  SK017_KWETS34_P  SK1826_KWETS34  SK1826_KWETS34_P  \
0                NaN              NaN             NaN               NaN   
1                NaN              NaN             NaN               NaN   
2                NaN              NaN             NaN               NaN   
3                NaN              NaN             NaN               NaN   
4                NaN              NaN             NaN               NaN   
...              ...              ...             ...               ...   
20009            NaN              NaN             NaN               NaN   
20010            NaN              NaN             NaN               NaN   
20011            NaN              NaN             NaN               NaN   
20012            NaN              NaN             NaN               NaN   
20013            NaN              NaN             NaN               NaN   

       SK2765_KWETS34  SK2765_KWETS34_P  SK66PLUS_KWETS34  SK66PLUS_KWETS34_P  \
0                 NaN               NaN               NaN                 NaN   
1                 NaN               NaN               NaN                 NaN   
2                 NaN               NaN               NaN                 NaN   
3                 NaN               NaN               NaN                 NaN   
4                 NaN               NaN               NaN                 NaN   
...               ...               ...               ...                 ...   
20009             NaN               NaN               NaN                 NaN   
20010             NaN               NaN               NaN                 NaN   
20011             NaN               NaN               NaN                 NaN   
20012             NaN               NaN               NaN                 NaN   
20013             NaN               NaN               NaN                 NaN   

       SKACTI  SKACTI_1000INW  
0      2497.0             2.7  
1       231.0             2.6  
2        13.0            12.9  
3       486.0             3.3  
4       246.0             1.5  
...       ...             ...  
20009     NaN             NaN  
20010     NaN             NaN  
20011     NaN             NaN  
20012     NaN             NaN  
20013     NaN             NaN  

[20014 rows x 887 columns]
       niveau niveaunaam    sd          sdnaam gebiedcode22  \
0         1.0   Gemeente  STAD  0363 Amsterdam         STAD   
1         2.0  Stadsdeel     A       A Centrum            A   
2         2.0  Stadsdeel     B     B Westpoort            B   
3         2.0  Stadsdeel     E          E West            E   
4         2.0  Stadsdeel     F    F Nieuw-West            F   
...       ...        ...   ...             ...          ...   
20009     4.0       Wijk     N           Noord           NN   
20010     4.0       Wijk     N           Noord           NQ   
20011     4.0       Wijk     S           Weesp           SA   
20012     4.0       Wijk     T        Zuidoost           TK   
20013     4.0       Wijk     T        Zuidoost           TM   

               gebiedcodenaam           gebiednaam  gsd  jaar  BEVTOTAAL  ...  \
0                   Amsterdam            Amsterdam  NaN  2023   918193.0  ...   
1                   A Centrum              Centrum  NaN  2023    90020.0  ...   
2                 B Westpoort            Westpoort  NaN  2023     1009.0  ...   
3                      E West                 West  NaN  2023   148569.0  ...   
4                F Nieuw-West           Nieuw-West  NaN  2023   163448.0  ...   
...                       ...                  ...  ...   ...        ...  ...   
20009  NN Tuindorp Nieuwendam  Tuindorp Nieuwendam  NaN  2001        NaN  ...   
20010            NQ Waterland            Waterland  NaN  2001        NaN  ...   
20011             SA Driemond             Driemond  NaN  2001        NaN  ...   
20012           TK Nellestein           Nellestein  NaN  2001        NaN  ...   
20013                 TM Gein                 Gein  NaN  2001        NaN  ...   

       SK017_KWETS34  SK017_KWETS34_P  SK1826_KWETS34  SK1826_KWETS34_P  \
0                NaN              NaN             NaN               NaN   
1                NaN              NaN             NaN               NaN   
2                NaN              NaN             NaN               NaN   
3                NaN              NaN             NaN               NaN   
4                NaN              NaN             NaN               NaN   
...              ...              ...             ...               ...   
20009            NaN              NaN             NaN               NaN   
20010            NaN              NaN             NaN               NaN   
20011            NaN              NaN             NaN               NaN   
20012            NaN              NaN             NaN               NaN   
20013            NaN              NaN             NaN               NaN   

       SK2765_KWETS34  SK2765_KWETS34_P  SK66PLUS_KWETS34  SK66PLUS_KWETS34_P  \
0                 NaN               NaN               NaN                 NaN   
1                 NaN               NaN               NaN                 NaN   
2                 NaN               NaN               NaN                 NaN   
3                 NaN               NaN               NaN                 NaN   
4                 NaN               NaN               NaN                 NaN   
...               ...               ...               ...                 ...   
20009             NaN               NaN               NaN                 NaN   
20010             NaN               NaN               NaN                 NaN   
20011             NaN               NaN               NaN                 NaN   
20012             NaN               NaN               NaN                 NaN   
20013             NaN               NaN               NaN                 NaN   

       SKACTI  SKACTI_1000INW  
0      2497.0             2.7  
1       231.0             2.6  
2        13.0            12.9  
3       486.0             3.3  
4       246.0             1.5  
...       ...             ...  
20009     NaN             NaN  
20010     NaN             NaN  
20011     NaN             NaN  
20012     NaN             NaN  
20013     NaN             NaN  

[20014 rows x 887 columns]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="202">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>bbga_df <span class="op">=</span> pd.read_csv(<span class="st">'C:/Users/jjcor/Downloads/2023_BBGA_0614_cf8d825e89.csv'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>bbga_ok <span class="op">=</span> bbga_df.loc[<span class="dv">3937</span>:<span class="dv">3963</span>,[<span class="st">'gebiednaam'</span>,<span class="st">'BHVESTAIRBNB'</span>]]</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#name of neighborhood paramenters equally (using airbnb file)</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>new_bbga <span class="op">=</span> bbga_ok.replace({</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Oud West, De Baarsjes"</span> :<span class="st">"De Baarsjes - Oud-West"</span>, <span class="st">"De Pijp, Rivierenbuurt"</span>:<span class="st">"De Pijp - Rivierenbuurt"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Indische Buurt, Oostelijk Havengebied"</span> : <span class="st">"Oostelijk Havengebied - Indische Buurt"</span>, <span class="st">"IJburg, Zeeburgereiland"</span> : <span class="st">"IJburg - Zeeburgereiland"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Geuzenveld, Slotermeer"</span> : <span class="st">"Geuzenveld - Slotermeer"</span>, <span class="st">"Buitenveldert, Zuidas"</span> : <span class="st">"Buitenveldert - Zuidas"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Oud-Zuid"</span> : <span class="st">"Zuid"</span>, <span class="st">"De Aker, Sloten, Nieuw-Sloten"</span> : <span class="st">"De Aker - Nieuw Sloten"</span>, <span class="st">"Gaasperdam"</span> : <span class="st">"Gaasperdam - Driemond"</span> </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>            })</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the amount of apartments from both datasets</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> px.bar(re_index, x<span class="op">=</span><span class="st">'neighbourhood_cleansed'</span>, y<span class="op">=</span><span class="st">'count'</span>, title<span class="op">=</span> <span class="st">'Data comparison of airbnb units according to bbga and airbnb'</span>)</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>fig.add_bar(x<span class="op">=</span>new_bbga[<span class="st">'gebiednaam'</span>], y<span class="op">=</span>new_bbga[<span class="st">'BHVESTAIRBNB'</span>],name<span class="op">=</span><span class="st">"BBGA"</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a><span class="co">#fig.add_bar(x=re_index.neighbourhood_cleansed.value_counts([]), y='count', name="abb")</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>fig.update_layout(barmode<span class="op">=</span><span class="st">'group'</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>fig.show()</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>[chart](images<span class="op">/</span>Q4_comparison.png)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>Unable to display output for mime type(s): application/vnd.plotly.v1+json</code></pre>
</div>
</div>
<p>The above results can be explained by the time period measured by both datasets. Still the proportion of rented units remains constant within both datasets with Haarlemmerbuurt as the only exception; reflecting an increased period of unavailability in the time registered by Airbnb.</p>
</section>
<section id="how-many-hotel-rooms-should-be-built-if-amsterdam-wants-to-accommodate-the-same-number-of-tourists" class="level3">
<h3 class="anchored" data-anchor-id="how-many-hotel-rooms-should-be-built-if-amsterdam-wants-to-accommodate-the-same-number-of-tourists">5. How many hotel rooms should be built if Amsterdam wants to accommodate the same number of tourists?</h3>
<div class="cell" data-execution_count="199">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#we sum individually the column 'accommodates' so we can retrieve the number of people who can stay </span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>no_ppl <span class="op">=</span> ok_listings.accommodates.<span class="bu">sum</span>()</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>tourists <span class="op">=</span> <span class="dv">30000</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>tourists_hotel <span class="op">=</span> tourists<span class="op">-</span>no_ppl</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>hotel_rooms_ams <span class="op">=</span> <span class="dv">41840</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>hotel_beds_ams <span class="op">=</span> <span class="dv">90918</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>avg_beds_per_room <span class="op">=</span> hotel_beds_ams<span class="op">/</span>hotel_rooms_ams</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="co">#print(avg_beds_per_room)</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Number of hotel rooms used by tourists who don't fit in airbnbs</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>no_hotel_rooms_used <span class="op">=</span> tourists_hotel<span class="op">/</span>avg_beds_per_room</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of hotel rooms used by tourists who do not fit in airbnbs:'</span>, no_hotel_rooms_used)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of hotel rooms used by tourists who do not fit in airbnbs: 3034.0649816318</code></pre>
</div>
</div>
</section>
<section id="how-many-different-licenses-are-issued" class="level3">
<h3 class="anchored" data-anchor-id="how-many-different-licenses-are-issued">6. How many different licenses are issued?</h3>
<div class="cell" data-tags="[]">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#verifying license column</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">#print(ok_listings.columns[68])</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>licenses <span class="op">=</span> (ok_listings.license.nunique())</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>license_values <span class="op">=</span>(ok_listings.license.value_counts())</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(license_values)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>exemptions <span class="op">=</span> (ok_listings.license.value_counts()[<span class="st">'Exempt'</span>])</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>ulicenses <span class="op">=</span> licenses<span class="op">-</span>exemptions</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of unique Airbnb licenses in Amsterdam (not counting the exempt values):'</span>,ulicenses)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>license
Exempt                      600
0363 78AD 8875 790E 3C05     14
ABCD 1234 AB12 89EF A0F9      9
036341086EC3C2FF2493          7
0363 A250 F710 53C5 1273      6
                           ... 
0363 D239 E048 910F 216B      1
0363 CB7E 060D 07E0 A4DE      1
0363 45B2 6D92 AA8B 1326      1
0363 F6A5 F87A D89D 8FC1      1
0363 2F20 4F53 FB57 2D7F      1
Name: count, Length: 6972, dtype: int64
Number of unique Airbnb licenses in Amsterdam (not counting the exempt values): 6372</code></pre>
</div>
</div>
</section>
<section id="results-analysis" class="level3">
<h3 class="anchored" data-anchor-id="results-analysis">Results analysis:</h3>
<p>We have more listings than licenses and several ‘exempt’ values. This is because the listings already have another type of license since they either work as hotels or hostels. https://www.airbnb.com/help/article/860</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>